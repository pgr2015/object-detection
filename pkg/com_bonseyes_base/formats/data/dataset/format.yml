name: com.bonsyes.data.dataset.0.1

title: Dataset with annotations

description: |
  This format represents a dataset with potentially some annotations.
  A dataset consists of a set of samples. Each sample has a unique name
  and may have one or more data, view and annotations. The data contain
  the raw information captured in the sample (for instance an image). The
  views contain processed versions of the data (for instance a cropped
  version of the raw data). The annotations are labels that have been
  associated to the data. Each data, view and annotation has a type.
  The types specified in reverse dotted notation.

  The pipeline framework currently defines the following generic types
  for data:

    - com.bonseyes.jpeg_image: a JPEG image
    - com.bonseyes.png_image: a PNG image
    - com.bonseyes.tiff_image: a TIFF image

  Other types can be defined, for instance an ACME corp can define a new
  image type named com.acme.image.

extends: com.bonsyes.format.directory.0.1

on_disk_representation: |

  The on-disk representation of this format is a directory containing a
  index and all set of binary blobs corresponding to data and views
  associated with the samples. The index file must have the name
  "dataset.json" and must contain a JSON serialized object with the
  following structure:

    - The root of the file is a object. Keys correspond to sample names,
      values are the information about the sample.

    - The information about the sample is an object with three possible
      keys: data, annotations and views. Each of these keys corresponds
      to a object containing as keys the types and a values the
      corresponding values for data, annotations and views.

    - Values in the data and views objects contain a blob name where the
      corresponding contents are stored.

  Each blob name used in the data and view objects corresponds to a file
  on-disk. The blob with name image1 for the view of type "com.bonseyes.jpeg_image"
  for instance corresponds to a file in the on-disk representation named
  "image1".

http_api:

  - endpoint: /
    description: |
      Returns a tar containing the on-disk representation of the dataset.

  - endpoint: /dataset.json
    description: |
      Returns a JSON file containing the corresponding file in the on-disk
      representation.

  - endpoint: /<name>
    description: |
      Returns the binary blob with the corresponding name in the on-disk
      representation.